{% extends "base.html" %}

{% block title %}Set New Password{% endblock %}

{% block content %}
<div style="
    max-width: 420px;
    margin: 3rem auto;
    padding: 2rem;
    border: 1px solid #334155;
    border-radius: 0.5rem;
    background: #0f172a;
    color: #e2e8f0;
">
    {% if validlink %}
        <h1 style="margin-top: 0; margin-bottom: 1rem;">Set New Password</h1>

        {% if form.errors %}
            <div style="color: #f87171; margin-bottom: 1rem;">
                {% for field in form %}
                    {% for error in field.errors %}
                        <p style="margin: 0.25rem 0;">{{ error }}</p>
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}

        <form method="post">
            {% csrf_token %}

            <div style="margin-bottom: 1rem;">
                {{ form.new_password1.label_tag }}
                {{ form.new_password1 }}
            </div>

            <div style="margin-bottom: 1rem;">
                {{ form.new_password2.label_tag }}
                {{ form.new_password2 }}
            </div>

            <button type="submit"
                    style="padding: 0.4rem 1rem; background: #38bdf8; border: none; border-radius: 0.25rem;">
                Set Password
            </button>
        </form>
    {% else %}
        <h1 style="margin-top: 0; margin-bottom: 1rem;">Invalid Link</h1>
        <p>This password reset link is invalid or has expired.</p>
        <p><a href="{% url 'password_reset' %}">Request a new reset link</a></p>
    {% endif %}
</div>
{% endblock %}
